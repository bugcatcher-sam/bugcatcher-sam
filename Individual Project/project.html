<!DOCTYPE html>
<html style="height: 100%; margin: 0;">
    <head>
        
        <title>map test</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0">
<!--Referencing leaflet-->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css" integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ==" crossorigin="" />
        
        <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js" integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==" crossorigin=""></script>

    </head>
        <body style="height: 100%; margin: 0;">
            <div id = "map" style="width: 100%; height: 100%; background: #888888; margin: 0;"></div>

            <script type="text/javascript">

                //map variables
                var mapSW = [0, 8192],
                    mapNE = [8192, 0];

                //creating map object
                var map = L.map('map').setView([0, 0], 2);

                //tiles
                L.tileLayer('maps/Shoreline/{z}/{x}/{y}.png', {
                    minZoom: 2,
                    maxZoom: 5,
                    continuousWorld: false,
                    noWrap: true,
                    crs: L.CRS.Simple,
                }).addTo(map);

                //map bounds
                map.setMaxBounds(new L.LatLngBounds(
                    map.unproject(mapSW, map.getMaxZoom()),
                    map.unproject(mapNE, map.getMaxZoom())
                ));

                //icons


                // markers and popups
                const stashIcon = L.icon({
                    iconUrl: 'images/stash.png',
                    iconSize: [30, 36],
                    iconAnchor: [14.5, 35],
                });
                var marker = L.marker([70, -180], {
                    draggable: true,
                }).addTo(map).bindPopup('');

                marker.on('dragend', function(e) {
                    marker.getPopup().setContent('Clicked ' + marker.getLatLng().toString() + '<br />' + 'Pixels ' + map.project(marker.getLatLng(), map.getMaxZoom().toString()))
                });

                var stash_radio = L.marker(map.unproject([5092, 4115.965], map.getMaxZoom()), {icon: stashIcon}).addTo(map).bindPopup('<img src="images/stash.png" alt="test" title="test image popup" style="width: 100%; height: 100%;">');

                var stash_church = L.marker(map.unproject([1026, 3284.617], map.getMaxZoom())).addTo(map).bindPopup('<img src="images/cache.png" alt="test" title="test image popup" style="width: 100%; height: 100%;">');

                var scav_sniper = L.marker(map.unproject([2727, 2560.994], map.getMaxZoom())).addTo(map).bindPopup('<img src="images/cache.png" alt="test" title="test image popup" style="width: 100%; height: 100%;">');
                //Layers
                var lg_stash = L.layerGroup([stash_radio, stash_church]).addTo(map);

                var lg_scav_sniper = L.layerGroup([scav_sniper]).addTo(map);

                var overlays = {
                    "Stashes" : lg_stash,
                    "Scav Snipers" : lg_scav_sniper,
                }

                L.control.layers(null, overlays).addTo(map);

            </script>
        </body>
</html>
